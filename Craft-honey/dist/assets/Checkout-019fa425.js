import{_ as x,u as f,L as _,r as g,o as d,e as v,w as b,b as e,t as l,c as p,f as C,F as k,p as w,j as i,k as m,l as h,m as c}from"./index-da27fc48.js";import{_ as P}from"./Group19-49c36de6.js";const S={data(){return{store:f(),controller:new AbortController,timer:setTimeout(console.log("will it"),2e3),clicked:!1}},components:{Layout:_},methods:{purchaseUser(){fetch("/api/addOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.store.email,sum:this.store.sum(),address:this.store.address,delivery:this.store.delivery,payment:this.store.payment,uid:this.store.uid,cart:this.store.cart})}),this.store.cart={},this.store.uid!=""?fetch("/api/emptyCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({1:this.store.uid})}).then(o=>console.log("ok")).catch(o=>console.log(o)):localStorage.setItem("cart",JSON.stringify(this.store.cart)),this.store.getOrders()},removeCart(o){delete this.store.cart[o],this.store.uid!=""?fetch("/api/deleteCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({1:o,2:this.store.uid})}):localStorage.setItem("cart",JSON.stringify(this.store.cart))},incrementProductCount:function(o){this.store.cart[o].quantity++,clearTimeout(this.timer),this.timer=setTimeout(()=>this.updateCart(o),1e3)},decrementProductCount(o){this.store.cart[o].quantity>1&&(this.store.cart[o].quantity--,clearTimeout(this.timer),this.timer=setTimeout(()=>this.updateCart(o),1e3))},updateCart(o){console.log("works"),this.store.uid!=""?fetch("/api/updateCart",{method:"POST",signal:this.controller.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify({1:parseInt(o),2:this.store.cart[o].quantity,3:this.store.uid})}):localStorage.setItem("cart",JSON.stringify(this.store.cart))}}},j={class:"flex justify-center text-[30px] mb-[10px]"},T={class:"text-gray-700"},q=e("div",{class:"flex justify-center mb-[5%]"},[e("hr",{class:"w-full bg-gray-700 h-[2px]"})],-1),O={class:"grid grid-flow-row gap-20"},D={class:"flex justify-center max-[1199px]:justify-between min-[1200px]:gap-x-[100px] max-[650px]:grid min-[500px]:grid-cols-2 max-[499px]:grid-cols-1"},U=e("div",{class:"relative max-[650px]:justify-self-center"},[e("img",{class:"w-[100px] h-[100px] rounded-[5px]",src:P})],-1),A={class:"text-[25px] text-center"},N={class:"mb-[10px]"},V={class:"my-[10px] grid grid-flow-col self-center justify-self-center w-[160px] min-[1200px]:ml-[200px]"},E=["onClick"],J=e("p",null,"-",-1),B=[J],L={class:"justify-self-center text-[20px] mx-[4px]"},I=["onClick"],F=e("p",null,"+",-1),M=[F],H={class:"justify-self-center"},K={class:"text-[30px] text-center"},R=["onClick"],z={class:"text-center mt-[60px] mb-[60px]"},G={class:"text-[40px]"},Q={class:"flex flex-col items-center [&_*]:my-[10px]"},W=["placeholder"],X={class:"grid grid-flow-col gap-[10px]"},Y=e("label",{for:"elsom"},"Элсом",-1),Z=e("label",{for:"mbank"},"Мбанк",-1),$={class:"grid grid-flow-col gap-[10px]"},ee=e("label",{for:"elsom"},"DHL",-1),te=e("label",{for:"mbank"},"DPD",-1),se=e("label",{for:"mbank"},"CDEK",-1),oe=["disabled"],re={key:0,class:"text-red-500 text-xl"};function le(o,r,ie,ne,t,n){const y=g("Layout");return d(),v(y,null,{default:b(()=>[e("div",null,[e("div",j,[e("h1",T,l(t.store.langProp.cart),1)]),q,e("div",O,[(d(!0),p(k,null,C(t.store.cart,(s,a)=>(d(),p("div",D,[U,e("div",A,[e("h1",N,l(t.store.langProp.med),1),e("span",null,l(t.store.langProp.volume)+": "+l(s.volume)+l(t.store.langProp.volumeShort),1)]),e("div",V,[e("button",{class:"w-[30px] h-[30px] border-solid border-2 border-[#1C1B1F] pb-[2px] rounded-full hover:bg-[#EAAD02]",onClick:u=>n.decrementProductCount(a)},B,8,E),e("p",L,l(s.quantity)+" "+l(t.store.langProp.quantityShort),1),e("button",{class:"justify-self-end w-[30px] h-[30px] pb-[2px] border-solid border-2 border-[#1C1B1F] rounded-full hover:bg-[#EAAD02]",onClick:u=>n.incrementProductCount(a)},M,8,I)]),e("div",H,[e("p",K,l(t.store.sumItem(a))+" "+l(t.store.langProp.currency),1),e("div",{onClick:u=>n.removeCart(a),class:"flex justify-center bg-[#EAAD02] h-[35px] w-[160px] rounded-[6px] px-2 text-center text-white hover:text-amber-700 hover:underline hover:cursor-pointer underline-offset-4"},[e("button",null,l(t.store.langProp.remove),1)],8,R)])]))),256))]),e("div",z,[e("p",G,l(t.store.langProp.total)+": "+l(t.store.sum())+" "+l(t.store.langProp.currency),1),e("form",{onSubmit:r[7]||(r[7]=w((...s)=>n.purchaseUser&&n.purchaseUser(...s),["prevent"]))},[e("div",Q,[t.store.uid?h("",!0):i((d(),p("input",{key:0,required:"",class:"border-black border-2",type:"email",placeholder:"Email","onUpdate:modelValue":r[0]||(r[0]=s=>t.store.email=s)},null,512)),[[m,t.store.email]]),i(e("input",{required:"",class:"border-black border-2",placeholder:t.store.langProp.address,"onUpdate:modelValue":r[1]||(r[1]=s=>t.store.address=s)},null,8,W),[[m,t.store.address]]),e("div",X,[e("p",null,l(t.store.langProp.paymentMethod)+":",1),i(e("input",{id:"elsom",required:"","onUpdate:modelValue":r[2]||(r[2]=s=>t.store.payment=s),value:"Элсом",class:"self-center h-[20px]",name:"payment",type:"radio"},null,512),[[c,t.store.payment]]),Y,i(e("input",{id:"mbank",required:"","onUpdate:modelValue":r[3]||(r[3]=s=>t.store.payment=s),value:"Мбанк",class:"self-center h-[20px]",name:"payment",type:"radio"},null,512),[[c,t.store.payment]]),Z]),e("div",$,[e("p",null,l(t.store.langProp.deliveryType)+":",1),i(e("input",{id:"elsom",required:"","onUpdate:modelValue":r[4]||(r[4]=s=>t.store.delivery=s),value:"dhl",class:"self-center h-[20px]",name:"delivery",type:"radio"},null,512),[[c,t.store.delivery]]),ee,i(e("input",{id:"mbank",required:"","onUpdate:modelValue":r[5]||(r[5]=s=>t.store.delivery=s),value:"dpd",class:"self-center h-[20px]",name:"delivery",type:"radio"},null,512),[[c,t.store.delivery]]),te,i(e("input",{id:"mbank",required:"","onUpdate:modelValue":r[6]||(r[6]=s=>t.store.delivery=s),value:"cdek",class:"self-center h-[20px]",name:"delivery",type:"radio"},null,512),[[c,t.store.delivery]]),se])]),e("button",{type:"submit",disabled:t.store.email.length<=2,class:"w-[200px] text-center bg-[#EAAD02] px-4 py-2 rounded-[12px] text-white hover:text-amber-700 hover:underline hover:cursor-pointer underline-offset-4"},l(t.store.langProp.buy),9,oe)],32),t.clicked&&t.store.email.length<=2?(d(),p("p",re,"Введите email!")):h("",!0)])])]),_:1})}const ae=x(S,[["render",le]]);export{ae as default};
