import{_ as h,u as p,L as _,r as m,o as c,e as f,w as x,b as t,c as d,f as b,F as g,t as o}from"./index-407c5fb6.js";import{_ as v}from"./Group19-49c36de6.js";const C={data(){return{store:p(),controller:new AbortController,timer:setTimeout(console.log("will it"),2e3)}},components:{Layout:_},methods:{removeCart(e){delete this.store.cart[e],this.store.uid!=""?fetch("/api/deleteCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({1:e,2:this.store.uid})}):localStorage.setItem("cart",JSON.stringify(this.store.cart))},incrementProductCount:function(e){this.store.cart[e].quantity++,clearTimeout(this.timer),this.timer=setTimeout(()=>this.updateCart(e),2e3)},decrementProductCount(e){this.store.cart[e].quantity>1&&(this.store.cart[e].quantity--,clearTimeout(this.timer),this.timer=setTimeout(()=>this.updateCart(e),2e3))},updateCart(e){console.log("works"),this.store.uid!=""?fetch("/api/updateCart",{method:"POST",signal:this.controller.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify({1:parseInt(e),2:this.store.cart[e].quantity,3:this.store.uid})}):localStorage.setItem("cart",JSON.stringify(this.store.cart))}}},y={class:""},w=t("div",{class:"flex justify-center text-[30px] mb-[10px]"},[t("h1",{class:"text-gray-700"},"Корзина")],-1),k=t("div",{class:"flex justify-center mb-[5%]"},[t("hr",{class:"w-full bg-gray-700 h-[2px]"})],-1),S={class:"grid grid-flow-row gap-20"},T={class:"grid grid-cols-4"},j=t("div",{class:"relative"},[t("img",{class:"w-[100px] h-[100px] rounded-[5px]",src:v})],-1),A={class:"text-[25px]"},B={class:"mb-[10px]"},O={class:"grid grid-flow-col self-center justify-self-center"},P=["onClick"],q=t("p",null,"-",-1),L=[q],N={class:"text-[20px]"},D=["onClick"],E=t("p",null,"+",-1),F=[E],I={class:"justify-self-center"},J={class:"text-[30px] text-center"},U=["onClick"],V=t("button",null,"Убрать",-1),$=[V],z={class:"text-center mt-[60px] mb-[60px]"},G={class:"text-[40px]"};function H(e,l,K,M,i,n){const u=m("Layout");return c(),f(u,null,{default:x(()=>[t("div",y,[w,k,t("div",S,[(c(!0),d(g,null,b(i.store.cart,(s,r)=>(c(),d("div",T,[j,t("div",A,[t("h1",B,o(s.name),1),t("span",null,"Объем: "+o(s.volume)+"л",1)]),t("div",O,[t("button",{class:"w-[30px] h-[30px] border-solid border-2 border-[#1C1B1F] pb-[2px] rounded-full hover:bg-[#EAAD02]",onClick:a=>n.decrementProductCount(r)},L,8,P),t("p",N,o(s.quantity)+" шт",1),t("button",{class:"w-[30px] h-[30px] pb-[2px] border-solid border-2 border-[#1C1B1F] rounded-full hover:bg-[#EAAD02]",onClick:a=>n.incrementProductCount(r)},F,8,D)]),t("div",I,[t("p",J,o(i.store.sumItem(r))+" сом",1),t("div",{onClick:a=>n.removeCart(r),class:"flex justify-center bg-[#EAAD02] h-[35px] w-[160px] rounded-[6px] px-2 text-center text-white hover:text-amber-700 hover:underline hover:cursor-pointer underline-offset-4"},$,8,U)])]))),256))]),t("div",z,[t("p",G,"Итого: "+o(i.store.sum())+" сом",1),t("button",{onClick:l[0]||(l[0]=(...s)=>e.purchaseUser&&e.purchaseUser(...s)),class:"w-[200px] text-center border-4 border-black bg-black px-4 py-2 rounded-[12px] text-white hover:text-amber-700 hover:underline hover:cursor-pointer underline-offset-4"}," Купить ")])])]),_:1})}const W=h(C,[["render",H]]);export{W as default};
