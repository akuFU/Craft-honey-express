import{_ as p,u as h,L as _,r as x,o as c,e as m,w as f,b as t,c as d,f as b,F as y,t as o}from"./index-51f8cd84.js";import{_ as g}from"./Group19-49c36de6.js";const v={data(){return{store:h(),controller:new AbortController,timer:setTimeout(console.log("will it"),2e3)}},components:{Layout:_},methods:{removeCart(e){delete this.store.cart[e],this.store.uid!=""?fetch("/api/deleteCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({1:e,2:this.store.uid})}):localStorage.setItem("cart",JSON.stringify(this.store.cart))},incrementProductCount:function(e){this.store.cart[e].quantity++,clearTimeout(this.timer),this.timer=setTimeout(()=>this.updateCart(e),1e3)},decrementProductCount(e){this.store.cart[e].quantity>1&&(this.store.cart[e].quantity--,clearTimeout(this.timer),this.timer=setTimeout(()=>this.updateCart(e),1e3))},updateCart(e){console.log("works"),this.store.uid!=""?fetch("/api/updateCart",{method:"POST",signal:this.controller.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify({1:parseInt(e),2:this.store.cart[e].quantity,3:this.store.uid})}):localStorage.setItem("cart",JSON.stringify(this.store.cart))}}},C=t("div",{class:"flex justify-center text-[30px] mb-[10px]"},[t("h1",{class:"text-gray-700"},"Корзина")],-1),w=t("div",{class:"flex justify-center mb-[5%]"},[t("hr",{class:"w-full bg-gray-700 h-[2px]"})],-1),k={class:"grid grid-flow-row gap-20"},j={class:"flex justify-center gap-[100px] max-[650px]:grid max-[650px]:grid-cols-2"},S=t("div",{class:"relative max-[650px]:justify-self-center"},[t("img",{class:"w-[100px] h-[100px] rounded-[5px]",src:g})],-1),T={class:"text-[25px] text-center"},A={class:"mb-[10px]"},B={class:"grid grid-flow-col self-center justify-self-center w-[160px] ml-[200px]"},O=["onClick"],P=t("p",null,"-",-1),q=[P],L={class:"justify-self-center text-[20px] mx-[4px]"},N=["onClick"],D=t("p",null,"+",-1),E=[D],F={class:"justify-self-center"},I={class:"text-[30px] text-center"},J=["onClick"],U=t("button",null,"Убрать",-1),V=[U],$={class:"text-center mt-[60px] mb-[60px]"},z={class:"text-[40px]"};function G(e,l,H,K,i,n){const u=x("Layout");return c(),m(u,null,{default:f(()=>[t("div",null,[C,w,t("div",k,[(c(!0),d(y,null,b(i.store.cart,(s,r)=>(c(),d("div",j,[S,t("div",T,[t("h1",A,o(s.name),1),t("span",null,"Объем: "+o(s.volume)+"л",1)]),t("div",B,[t("button",{class:"w-[30px] h-[30px] border-solid border-2 border-[#1C1B1F] pb-[2px] rounded-full hover:bg-[#EAAD02]",onClick:a=>n.decrementProductCount(r)},q,8,O),t("p",L,o(s.quantity)+" шт",1),t("button",{class:"justify-self-end w-[30px] h-[30px] pb-[2px] border-solid border-2 border-[#1C1B1F] rounded-full hover:bg-[#EAAD02]",onClick:a=>n.incrementProductCount(r)},E,8,N)]),t("div",F,[t("p",I,o(i.store.sumItem(r))+" сом",1),t("div",{onClick:a=>n.removeCart(r),class:"flex justify-center bg-[#EAAD02] h-[35px] w-[160px] rounded-[6px] px-2 text-center text-white hover:text-amber-700 hover:underline hover:cursor-pointer underline-offset-4"},V,8,J)])]))),256))]),t("div",$,[t("p",z,"Итого: "+o(i.store.sum())+" сом",1),t("button",{onClick:l[0]||(l[0]=(...s)=>e.purchaseUser&&e.purchaseUser(...s)),class:"w-[200px] text-center border-4 border-black bg-black px-4 py-2 rounded-[12px] text-white hover:text-amber-700 hover:underline hover:cursor-pointer underline-offset-4"}," Купить ")])])]),_:1})}const R=p(v,[["render",G]]);export{R as default};
